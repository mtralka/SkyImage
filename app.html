<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>skyimage.app API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>skyimage.app</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">from datetime import date
from datetime import datetime
from typing import List
from typing import Optional
from typing import Union

from matplotlib.pyplot import savefig
import pandas as pd

from skyimage.stations.Ground.GroundControl import GroundControl
from skyimage.stations.Sky.SkyControl import SkyControl
from skyimage.utils.utils import Station as StationObject
from skyimage.utils.utils import buffer_value
from skyimage.utils.validators import validate_datetime
from skyimage.utils.validators import validate_file_path


class SkyImage:
    &#34;&#34;&#34;
    Control object for orchestrating `SkyControl` and `GroundControl` objects


    Attributes
    ----------
    `year`: int
        Year to extract data for

    `j_day` : int or str
        Julian days to extract data for

    `station` : str
        Name of target station

    `sky_path` : str
        File path to sky station data

    `ground_path` : str
        File path to ground station data

    `save_images`: bool
        Boolean for saving photo and cloud mask results

    `show_images`: bool
        Boolean for showing photo and cloud mask results

    Methods
    -------
    `run()`
        Run all computations to specifications

    `results()`
        return process results

    &#34;&#34;&#34;

    def __init__(
        self,
        year: int = None,
        j_day: Union[int, str] = None,
        station: str = None,
        sky_path: str = None,
        ground_path: str = None,
        save_images: Optional[bool] = False,
        show_images: Optional[bool] = False,
        show_time_stats: Optional[bool] = False,
    ):

        self.ground_path = validate_file_path(ground_path, &#34;ground&#34;)
        self.modis_path = validate_file_path(sky_path, &#34;MODIS&#34;)

        self.station = StationObject(name=station)

        # create datetime objects asap
        # app return j_day and j_day_full properties
        _, self.stds = validate_datetime(j_day, year)
        stds_dict: dict = {}
        for std in self.stds:
            j_day = buffer_value(std.timetuple().tm_yday, 3)
            stds_dict[str(std.year) + j_day] = std

        self.stds = stds_dict
        self.save_images: bool = save_images
        self.show_images: bool = show_images
        self.show_time_stats: bool = show_time_stats

    @property
    def j_days(self) -&gt; List[str]:
        j_days: list = []
        for target in self.stds.values():
            j_day = target.timetuple().tm_yday
            j_days.append(buffer_value(j_day, 3))
        return j_days

    @property
    def j_days_full(self, abbrev: bool = False) -&gt; List[str]:

        return list(self.stds.keys())

    @property
    def j_days_abrev(self) -&gt; str:
        j_days: list = list(self.stds.keys())
        first: str = j_days[0]
        last: str = j_days[-1]

        return f&#34;{first}-{last}&#34;

    @property
    def datetimes(self) -&gt; List[datetime]:
        return list(self.stds.values())

    def __str__(self) -&gt; str:
        return f&#34;&#34;&#34;
        {self.sky}

        {self.ground}
        &#34;&#34;&#34;

    def run(self):

        self.sky = SkyControl(
            stds=self.stds, path=self.modis_path, station=self.station
        )

        self.sky.run_all(show_time=self.show_time_stats)

        matched_stds: dict = self.sky.extract_stds()

        self.ground = GroundControl(
            path=self.ground_path,
            station=self.station,
            stds=matched_stds,
            save_images=self.save_images,
            show_images=self.show_images,
        )

        self.ground.run_all(show_time=self.show_time_stats)

    def results(self, as_dataframe: Optional[bool] = False, save: bool = False):

        if not hasattr(self, &#34;sky&#34;):
            raise AssertionError(
                &#34;SkyControl object required, no SkyImage objects present&#34;
            )

        if not hasattr(self, &#34;ground&#34;):
            raise AssertionError(
                &#34;GroundControl object required, no GroundImage objects present&#34;
            )

        if save and not as_dataframe:
            as_dataframe = True

        sky_results: dict = self.sky.results(as_dataframe=False)
        ground_results: dict = self.ground.results(as_dataframe=False)

        if not as_dataframe:
            return {&#34;SKY&#34;: sky_results, &#34;GROUND&#34;: ground_results}

        sky_df = pd.DataFrame.from_dict(sky_results, orient=&#34;index&#34;).add_prefix(&#34;sky_&#34;)
        ground_df = pd.DataFrame.from_dict(ground_results, orient=&#34;index&#34;).add_prefix(
            &#34;grnd_&#34;
        )

        combined_df = pd.merge(sky_df, ground_df, left_index=True, right_index=True)

        if save:
            combined_df.to_csv(f&#34;SkyImage_Results_{self.j_days_abrev}.csv&#34;)

        return combined_df</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="skyimage.app.SkyImage"><code class="flex name class">
<span>class <span class="ident">SkyImage</span></span>
<span>(</span><span>year: int = None, j_day: Union[int, str] = None, station: str = None, sky_path: str = None, ground_path: str = None, save_images: Union[bool, NoneType] = False, show_images: Union[bool, NoneType] = False, show_time_stats: Union[bool, NoneType] = False)</span>
</code></dt>
<dd>
<div class="desc"><p>Control object for orchestrating <code>SkyControl</code> and <code>GroundControl</code> objects</p>
<h2 id="attributes">Attributes</h2>
<p><code>year</code>: int
Year to extract data for</p>
<p><code>j_day</code> : int or str
Julian days to extract data for</p>
<p><code>station</code> : str
Name of target station</p>
<p><code>sky_path</code> : str
File path to sky station data</p>
<p><code>ground_path</code> : str
File path to ground station data</p>
<p><code>save_images</code>: bool
Boolean for saving photo and cloud mask results</p>
<p><code>show_images</code>: bool
Boolean for showing photo and cloud mask results</p>
<h2 id="methods">Methods</h2>
<p><code>run()</code>
Run all computations to specifications</p>
<p><code>results()</code>
return process results</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class SkyImage:
    &#34;&#34;&#34;
    Control object for orchestrating `SkyControl` and `GroundControl` objects


    Attributes
    ----------
    `year`: int
        Year to extract data for

    `j_day` : int or str
        Julian days to extract data for

    `station` : str
        Name of target station

    `sky_path` : str
        File path to sky station data

    `ground_path` : str
        File path to ground station data

    `save_images`: bool
        Boolean for saving photo and cloud mask results

    `show_images`: bool
        Boolean for showing photo and cloud mask results

    Methods
    -------
    `run()`
        Run all computations to specifications

    `results()`
        return process results

    &#34;&#34;&#34;

    def __init__(
        self,
        year: int = None,
        j_day: Union[int, str] = None,
        station: str = None,
        sky_path: str = None,
        ground_path: str = None,
        save_images: Optional[bool] = False,
        show_images: Optional[bool] = False,
        show_time_stats: Optional[bool] = False,
    ):

        self.ground_path = validate_file_path(ground_path, &#34;ground&#34;)
        self.modis_path = validate_file_path(sky_path, &#34;MODIS&#34;)

        self.station = StationObject(name=station)

        # create datetime objects asap
        # app return j_day and j_day_full properties
        _, self.stds = validate_datetime(j_day, year)
        stds_dict: dict = {}
        for std in self.stds:
            j_day = buffer_value(std.timetuple().tm_yday, 3)
            stds_dict[str(std.year) + j_day] = std

        self.stds = stds_dict
        self.save_images: bool = save_images
        self.show_images: bool = show_images
        self.show_time_stats: bool = show_time_stats

    @property
    def j_days(self) -&gt; List[str]:
        j_days: list = []
        for target in self.stds.values():
            j_day = target.timetuple().tm_yday
            j_days.append(buffer_value(j_day, 3))
        return j_days

    @property
    def j_days_full(self, abbrev: bool = False) -&gt; List[str]:

        return list(self.stds.keys())

    @property
    def j_days_abrev(self) -&gt; str:
        j_days: list = list(self.stds.keys())
        first: str = j_days[0]
        last: str = j_days[-1]

        return f&#34;{first}-{last}&#34;

    @property
    def datetimes(self) -&gt; List[datetime]:
        return list(self.stds.values())

    def __str__(self) -&gt; str:
        return f&#34;&#34;&#34;
        {self.sky}

        {self.ground}
        &#34;&#34;&#34;

    def run(self):

        self.sky = SkyControl(
            stds=self.stds, path=self.modis_path, station=self.station
        )

        self.sky.run_all(show_time=self.show_time_stats)

        matched_stds: dict = self.sky.extract_stds()

        self.ground = GroundControl(
            path=self.ground_path,
            station=self.station,
            stds=matched_stds,
            save_images=self.save_images,
            show_images=self.show_images,
        )

        self.ground.run_all(show_time=self.show_time_stats)

    def results(self, as_dataframe: Optional[bool] = False, save: bool = False):

        if not hasattr(self, &#34;sky&#34;):
            raise AssertionError(
                &#34;SkyControl object required, no SkyImage objects present&#34;
            )

        if not hasattr(self, &#34;ground&#34;):
            raise AssertionError(
                &#34;GroundControl object required, no GroundImage objects present&#34;
            )

        if save and not as_dataframe:
            as_dataframe = True

        sky_results: dict = self.sky.results(as_dataframe=False)
        ground_results: dict = self.ground.results(as_dataframe=False)

        if not as_dataframe:
            return {&#34;SKY&#34;: sky_results, &#34;GROUND&#34;: ground_results}

        sky_df = pd.DataFrame.from_dict(sky_results, orient=&#34;index&#34;).add_prefix(&#34;sky_&#34;)
        ground_df = pd.DataFrame.from_dict(ground_results, orient=&#34;index&#34;).add_prefix(
            &#34;grnd_&#34;
        )

        combined_df = pd.merge(sky_df, ground_df, left_index=True, right_index=True)

        if save:
            combined_df.to_csv(f&#34;SkyImage_Results_{self.j_days_abrev}.csv&#34;)

        return combined_df</code></pre>
</details>
<h3>Instance variables</h3>
<dl>
<dt id="skyimage.app.SkyImage.datetimes"><code class="name">var <span class="ident">datetimes</span> : List[datetime.datetime]</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def datetimes(self) -&gt; List[datetime]:
    return list(self.stds.values())</code></pre>
</details>
</dd>
<dt id="skyimage.app.SkyImage.j_days"><code class="name">var <span class="ident">j_days</span> : List[str]</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def j_days(self) -&gt; List[str]:
    j_days: list = []
    for target in self.stds.values():
        j_day = target.timetuple().tm_yday
        j_days.append(buffer_value(j_day, 3))
    return j_days</code></pre>
</details>
</dd>
<dt id="skyimage.app.SkyImage.j_days_abrev"><code class="name">var <span class="ident">j_days_abrev</span> : str</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def j_days_abrev(self) -&gt; str:
    j_days: list = list(self.stds.keys())
    first: str = j_days[0]
    last: str = j_days[-1]

    return f&#34;{first}-{last}&#34;</code></pre>
</details>
</dd>
<dt id="skyimage.app.SkyImage.j_days_full"><code class="name">var <span class="ident">j_days_full</span> : List[str]</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def j_days_full(self, abbrev: bool = False) -&gt; List[str]:

    return list(self.stds.keys())</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="skyimage.app.SkyImage.results"><code class="name flex">
<span>def <span class="ident">results</span></span>(<span>self, as_dataframe: Union[bool, NoneType] = False, save: bool = False)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def results(self, as_dataframe: Optional[bool] = False, save: bool = False):

    if not hasattr(self, &#34;sky&#34;):
        raise AssertionError(
            &#34;SkyControl object required, no SkyImage objects present&#34;
        )

    if not hasattr(self, &#34;ground&#34;):
        raise AssertionError(
            &#34;GroundControl object required, no GroundImage objects present&#34;
        )

    if save and not as_dataframe:
        as_dataframe = True

    sky_results: dict = self.sky.results(as_dataframe=False)
    ground_results: dict = self.ground.results(as_dataframe=False)

    if not as_dataframe:
        return {&#34;SKY&#34;: sky_results, &#34;GROUND&#34;: ground_results}

    sky_df = pd.DataFrame.from_dict(sky_results, orient=&#34;index&#34;).add_prefix(&#34;sky_&#34;)
    ground_df = pd.DataFrame.from_dict(ground_results, orient=&#34;index&#34;).add_prefix(
        &#34;grnd_&#34;
    )

    combined_df = pd.merge(sky_df, ground_df, left_index=True, right_index=True)

    if save:
        combined_df.to_csv(f&#34;SkyImage_Results_{self.j_days_abrev}.csv&#34;)

    return combined_df</code></pre>
</details>
</dd>
<dt id="skyimage.app.SkyImage.run"><code class="name flex">
<span>def <span class="ident">run</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def run(self):

    self.sky = SkyControl(
        stds=self.stds, path=self.modis_path, station=self.station
    )

    self.sky.run_all(show_time=self.show_time_stats)

    matched_stds: dict = self.sky.extract_stds()

    self.ground = GroundControl(
        path=self.ground_path,
        station=self.station,
        stds=matched_stds,
        save_images=self.save_images,
        show_images=self.show_images,
    )

    self.ground.run_all(show_time=self.show_time_stats)</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="skyimage" href="index.html">skyimage</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="skyimage.app.SkyImage" href="#skyimage.app.SkyImage">SkyImage</a></code></h4>
<ul class="two-column">
<li><code><a title="skyimage.app.SkyImage.datetimes" href="#skyimage.app.SkyImage.datetimes">datetimes</a></code></li>
<li><code><a title="skyimage.app.SkyImage.j_days" href="#skyimage.app.SkyImage.j_days">j_days</a></code></li>
<li><code><a title="skyimage.app.SkyImage.j_days_abrev" href="#skyimage.app.SkyImage.j_days_abrev">j_days_abrev</a></code></li>
<li><code><a title="skyimage.app.SkyImage.j_days_full" href="#skyimage.app.SkyImage.j_days_full">j_days_full</a></code></li>
<li><code><a title="skyimage.app.SkyImage.results" href="#skyimage.app.SkyImage.results">results</a></code></li>
<li><code><a title="skyimage.app.SkyImage.run" href="#skyimage.app.SkyImage.run">run</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>